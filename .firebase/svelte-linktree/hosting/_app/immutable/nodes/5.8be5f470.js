import{s as ee,v as M,p as z,g as w,c as S,l as te,h as R,i as j,d as E,z as Y,m as se,B as T,k}from"../chunks/scheduler.d978c4dc.js";import{S as ae,i as ne,d as B,v as oe,j as ie,k as re,m as le,b as ce,t as ue,l as fe,e as g,g as c,a as L,n as b,p as me}from"../chunks/index.7cd3bf66.js";import{A as Z}from"../chunks/AuthCheck.88256d3c.js";import{d as V,e as H,u as D,a as O,g as J,f as K,h as Q,r as W,i as X}from"../chunks/firebase.312fba77.js";const y="src/routes/login/photo/+page.svelte";function F(r){let e,t="Uploading...",s,n;const a={c:function(){e=w("p"),e.textContent=t,s=S(),n=w("progress"),this.h()},l:function(o){e=R(o,"P",{["data-svelte-h"]:!0}),Y(e)!=="svelte-be0b5h"&&(e.textContent=t),s=E(o),n=R(o,"PROGRESS",{class:!0}),j(n).forEach(g),this.h()},h:function(){k(e,y,44,8,1408),c(n,"class","progress progress-info w-56 mt-6"),k(n,y,45,8,1437)},m:function(o,d){L(o,e,d),L(o,s,d),L(o,n,d)},d:function(o){o&&(g(e),g(s),g(n))}};return B("SvelteRegisterBlock",{block:a,id:F.name,type:"if",source:"(41:6) {#if uploading}",ctx:r}),a}function $(r){let e,t,s,n,a,l,o,d="Pick a file",_,p,U,i,m,x,C,A,f=r[2]&&F(r);const N={c:function(){e=w("form"),t=w("div"),s=w("img"),a=S(),l=w("label"),o=w("span"),o.textContent=d,_=S(),p=w("input"),U=S(),f&&f.c(),i=S(),m=w("a"),x=te("Finish"),this.h()},l:function(u){e=R(u,"FORM",{class:!0});var v=j(e);t=R(v,"DIV",{class:!0});var h=j(t);s=R(h,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),a=E(h),l=R(h,"LABEL",{for:!0,class:!0});var q=j(l);o=R(q,"SPAN",{class:!0,["data-svelte-h"]:!0}),Y(o)!=="svelte-1xba4c3"&&(o.textContent=d),q.forEach(g),_=E(h),p=R(h,"INPUT",{type:!0,name:!0,class:!0,accept:!0}),U=E(h),f&&f.l(h),h.forEach(g),v.forEach(g),i=E(u),m=R(u,"A",{href:!0,class:!0});var G=j(m);x=se(G,"Finish"),G.forEach(g),this.h()},h:function(){var u;T(s.src,n=r[1]??((u=r[0])==null?void 0:u.photoURL)??"/user.png")||c(s,"src",n),c(s,"alt","photoURL"),c(s,"width","256"),c(s,"height","256"),c(s,"class","mx-auto"),k(s,y,26,6,867),c(o,"class","label-text"),k(o,y,34,8,1091),c(l,"for","photoURL"),c(l,"class","label"),k(l,y,33,6,1045),c(p,"type","file"),c(p,"name","photoURL"),c(p,"class","file-input file-input-bordered w-full max-w-xs"),c(p,"accept","image/png, image/jpeg, image/gif, image/webp"),k(p,y,36,6,1158),c(t,"class","form-control w-full max-w-xs my-10 mx-auto text-center"),k(t,y,25,4,791),c(e,"class","max-w-screen-md w-full"),k(e,y,24,2,748),c(m,"href",r[3]),c(m,"class","btn btn-primary"),k(m,y,50,2,1532)},m:function(u,v){L(u,e,v),b(e,t),b(t,s),b(t,a),b(t,l),b(l,o),b(t,_),b(t,p),b(t,U),f&&f.m(t,null),L(u,i,v),L(u,m,v),b(m,x),C||(A=me(p,"change",r[4],!1,!1,!1,!1),C=!0)},p:function(u,v){var h;v&3&&!T(s.src,n=u[1]??((h=u[0])==null?void 0:h.photoURL)??"/user.png")&&c(s,"src",n),u[2]?f||(f=F(u),f.c(),f.m(t,null)):f&&(f.d(1),f=null),v&8&&c(m,"href",u[3])},d:function(u){u&&(g(e),g(i),g(m)),f&&f.d(),C=!1,A()}};return B("SvelteRegisterBlock",{block:N,id:$.name,type:"slot",source:"(21:0) <AuthCheck>",ctx:r}),N}function I(r){let e,t;e=new Z({props:{$$slots:{default:[$]},$$scope:{ctx:r}},$$inline:!0});const s={c:function(){ie(e.$$.fragment)},l:function(a){re(e.$$.fragment,a)},m:function(a,l){le(e,a,l),t=!0},p:function(a,[l]){const o={};l&79&&(o.$$scope={dirty:l,ctx:a}),e.$set(o)},i:function(a){t||(ce(e.$$.fragment,a),t=!0)},o:function(a){ue(e.$$.fragment,a),t=!1},d:function(a){fe(e,a)}};return B("SvelteRegisterBlock",{block:s,id:I.name,type:"component",source:"",ctx:r}),s}function pe(r,e,t){let s,n,a;M(D,"user"),z(r,D,i=>t(5,n=i)),M(O,"userData"),z(r,O,i=>t(0,a=i));let{$$slots:l={},$$scope:o}=e;oe("Page",l,[]);let d,_=!1;async function p(i){t(2,_=!0);const m=i.target.files[0];t(1,d=URL.createObjectURL(m));const x=W(H,`users/${n.uid}/profile.png`),C=await X(x,m),A=await Q(C.ref);await K(J(V,"users",n.uid),{photoURL:A}),t(2,_=!1)}const U=[];return Object.keys(e).forEach(i=>{!~U.indexOf(i)&&i.slice(0,2)!=="$$"&&i!=="slot"&&console.warn(`<Page> was created with unknown prop '${i}'`)}),r.$capture_state=()=>({AuthCheck:Z,db:V,storage:H,user:D,userData:O,doc:J,updateDoc:K,getDownloadURL:Q,ref:W,uploadBytes:X,previewURL:d,uploading:_,upload:p,href:s,$user:n,$userData:a}),r.$inject_state=i=>{"previewURL"in i&&t(1,d=i.previewURL),"uploading"in i&&t(2,_=i.uploading),"href"in i&&t(3,s=i.href)},e&&"$$inject"in e&&r.$inject_state(e.$$inject),r.$$.update=()=>{r.$$.dirty&1&&t(3,s=`/${a==null?void 0:a.username}/edit`)},[a,d,_,s,p]}class ve extends ae{constructor(e){super(e),ne(this,e,pe,I,ee,{}),B("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:I.name})}}export{ve as component};
